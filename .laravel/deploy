#!/usr/bin/env bash

# Exit on error
set -e

echo "ğŸš€ Starting deployment..."

# Install npm dependencies
echo "ğŸ“¦ Installing npm dependencies..."
npm ci

# Build frontend assets
echo "ğŸ—ï¸  Building frontend assets..."
npm run build

# Run migrations
echo "ğŸ—„ï¸  Running migrations..."
php artisan migrate --force

# Clear and cache config
echo "âš™ï¸  Optimizing application..."
php artisan config:cache
php artisan route:cache
php artisan view:cache

echo "âœ… Deployment completed successfully!"
